# Minimal test deployment
FROM node:20-alpine

WORKDIR /app

# Only copy package files for minimal dependencies
COPY package*.json ./
RUN npm install express --save

# Copy minimal server
COPY server/minimal.ts ./
RUN npm install -g tsx

# No user switching for testing
EXPOSE 8080

# Start minimal server
CMD ["tsx", "minimal.ts"]